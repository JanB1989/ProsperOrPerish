# Prosper or Perish - Building Adjustments
# This file contains INJECT/TRY_INJECT entries and REPLACE entries for buildings
# in large vanilla files where full file override is impractical


### BUILDING ADJUSTMENTS
INJECT:construction_center = {
    rural_settlement = yes
}


INJECT:granary = {
	pop_type = peasants
	employment_size = 1

	rural_settlement = yes
	town = yes
	city = yes

	modifier = {
		local_food_capacity = 600
		local_food_capacity_modifier = 0.10
	}

	ai_forbid_shutdown = yes

}


INJECT:irrigation_systems = {
	modifier = {
		local_monthly_food_modifier = -0.01
	}
}

INJECT:bund = {
	modifier = {
		local_monthly_food_modifier = -0.05
	}
}

INJECT:fruit_orchard = {
	pop_type = peasants
		
	rural_settlement = yes
	town = yes
	city = yes

	modifier = {
		local_monthly_food = 1.0 
		local_monthly_food_modifier = 0.015
	}
}

INJECT:sheep_farms = {
	pop_type = peasants

	rural_settlement = yes
	town = yes
	city = yes

	modifier = {
		local_monthly_food = 1.0
		local_monthly_food_modifier = 0.015
	}
}

INJECT:fishing_village = {
	rural_settlement = yes
	town = yes
	city = yes

	modifier = {
		local_food_capacity_modifier = 0.05
		local_monthly_food = 1.5
		local_monthly_food_modifier = 0.02
		local_sailors = 0.001	
	}
}

INJECT:forest_village = {
	pop_type = peasants

	rural_settlement = yes
	town = yes
	city = yes

	modifier = {
		local_monthly_food = 0.5
		local_monthly_food_modifier = 0.02
		local_food_capacity = 50
		local_food_capacity_modifier = 0.05
	}
}


### BUILDING AND PRODUCTION METHODS REPLACEMENTS
REPLACE:lumber_mill = {
	is_foreign = no
	max_levels = rural_building_cap
	pop_type = laborers
	
	employment_size = rural_peasant_produce_employment
	
	rural_settlement = yes
	town = yes
	city = yes

	
	location_potential = {
		OR = {
			vegetation = woods
			vegetation = forest
			vegetation = farmland
			vegetation = jungle
		}
		NOT = {
			raw_material = goods:lumber
		}
	}

	category = rgo_building_category
	
	build_time = rural_build_time
	
	unique_production_methods = {
		pp_lumber_mill_maintenance = {
			produced = lumber
			output = 1

			tools = 0.4
			
			category = building_maintenance
		}

		# Horse teams haul logs and power simple machinery: fewer tools, but consumes horses.
		lumber_mill_horse_teams = {
			produced = lumber
			output = 1

			tools = 0.20
			horses = 0.30

			category = building_maintenance
		}
	}

	unique_production_methods = {
		lumber_mill_no_extra_rations = {
			category = building_maintenance
		}

		lumber_mill_extra_rations = {
			victuals = 0.20

			produced = lumber
			output = 0.30

			category = building_maintenance
		}
	}

	construction_demand = basic_construction_needs
}

REPLACE:farming_village = {
	is_foreign = no
	max_levels = rural_building_cap
	pop_type = peasants
	
	category = village_category
	employment_size = village_employment_size
	
	rural_settlement = yes
	town = yes
	city = yes
	
	location_potential = {
		OR = {
			vegetation = farmland
			raw_material = goods:wheat
			raw_material = goods:maize
			raw_material = goods:rice
			raw_material = goods:millet
			raw_material = goods:legumes
			raw_material = goods:potato
			raw_material = goods:livestock
			raw_material = goods:olives
			raw_material = goods:fruit
			raw_material = goods:wool
		}
	}
	
		
	
	build_time = village_build_time
	
	unique_production_methods = {
		pp_farming_village_maintenance = {
			tools = 0.025
			clay = 1.0
			
			output = 0.5
			
			produced = livestock
			
			debug_max_profit = 0.6
	
			category = building_maintenance
		}

		millet_farm_maintenance = {
			tools = 0.1
            horses = 0.1

			output = 0.5

			produced = millet

			debug_max_profit = 0.6

			category = building_maintenance
		}
	}

	construction_demand = village_construction

	modifier = {
		local_food_capacity = 50
		local_food_capacity_modifier = 0.05
		local_monthly_food_modifier = 0.03
		local_monthly_food = 2.0
		local_peasants_estate_power = 0.25		#25% higher here.
		
		local_laborers_desired_pop = 0.1
		local_soldiers_desired_pop = 0.05

	}
}
